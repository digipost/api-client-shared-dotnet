sudo: required
language: csharp
solution: api-client-shared.sln
mono: none
dotnet: 2.0.0
before_install: 
  - ./deploy/apt-get-add-keys-and-update.sh
  - ./deploy/mono-install.sh
  - ./deploy/nuget-install.sh
  - sudo apt-get install tree
  - ./deploy/version-patcher-install.sh
  - ./deploy/nuspec-version-patcher.sh
install:
  - dotnet restore
script:
  - dotnet build -c Release
  - dotnet test Digipost.Api.Client.Shared.Tests/Digipost.Api.Client.Shared.Tests.csproj
  - mono nuget.exe pack api-client-shared.nuspec -Verbosity detailed
  - mono nuget.exe push *.nupkg -Verbosity detailed -ApiKey $NUGET_API_KEY -Source https://api.nuget.org/v3/index.json

